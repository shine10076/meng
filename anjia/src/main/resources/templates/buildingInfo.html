<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer"/>
    <title>楼盘显示</title>
</head>
<script src="js/jquery-2.1.1.min.js" th:src="@{/js/jquery-2.1.1.min.js}"></script>
<script src="js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}"/>
<link href="css/citystyle.css" th:href="@{/css/citystyle.css}" type="text/css" rel="stylesheet" />
<link href="css/static_building.css" th:href="@{/css/static_building.css}" type="text/css" rel="stylesheet" />
<link href="css/headbar.css" th:href="@{/css/headbar.css}" type="text/css" rel="stylesheet" />
<script src="js/echarts.js" th:src="@{/js/echarts.js}"></script>
<script src="js/bootstrap-paginator.js" th:src="@{/js/bootstrap-paginator.js}"></script>
<link th:href="@{/css/footer.css}" type="text/css" rel="stylesheet"/>
<body>
<!--城市列表-->
<div class="selcity" id="allCity" style="display:none;">
    <table class="cityTable">
        <tbody>
        <tr>
            <td><a  href="#">苏州</a></td>
            <td><a href="#">上海</a></td>
            <td><a href="#">广州</a></td>
            <td><a href="#">深圳</a></td>
            <td><a href="#">重庆</a></td>
            <td><a href="#">西安</a></td>
        </tr>
        <tr>
            <td><a href="#">北京</a></td>
            <td><a href="#">南京</a></td>
            <td><a href="#">成都</a></td>
            <td><a href="#">武汉</a></td>
            <td><a href="#">杭州</a></td>
            <td><a href="#">济南</a></td>
        </tr>
        </tbody>
    </table>
    <div class="none"><a id="foldin" href="#">收起</a></div>
</div>
<!--导航栏-->
<div class="container home_header">
    <div  id="headerbar" class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header" style="margin-left: 100px;">
                <a href="#" class="navbar-brand"></a>
            </div>
            <label id="toggle-label" class="visible-xs-inline-block" for="toggle-checkbox">MENU</label>
            <input class="hidden" id="toggle-checkbox" type="checkbox">
            <div class="hidden-xs">
                <ul class="nav navbar-nav" style="font-family: '微软雅黑';color: #FFFFFF;">
                    <li><a th:href ="@{/}" style="font-family: '微软雅黑';color: #FFFFFF;font-weight: 600;">首页</a></li>
                    <li><a th:href = "@{/building}" style="font-family: '微软雅黑';color: #FFFFFF;font-weight: 600;">二手房</a></li>
                    <li><a th:href="@{/city}" style="font-family: '微软雅黑';color: #FFFFFF;font-weight: 600;">历史房价</a></li>
                    <li><a th:href="@{/calculator}" style="font-family: '微软雅黑';color: #FFFFFF;font-weight: 600;">工具</a></li>
                    <li><a href="#" style="font-family: '微软雅黑';color: #FFFFFF;font-weight: 600;">问答</a></li>
                    <li class="i1" th:if="${session.CityName} != null"><a id = "cityname" th:text = "${session.CityName}"  href="#" style="font-family: '微软雅黑';color: #FFFFFF;background: rgba(128,128,128,0.5)">苏州</a> </li>
                    <li class="i1" th:if="${session.CityName} == null"><a id = "cityname"  href="#" style="font-family: '微软雅黑';color: #FFFFFF;background: rgba(128,128,128,0.5)">苏州</a> </li>
                    <li class="i2" id="changeCity"><a href="#" style="font-family: '微软雅黑';color: #FFFFFF;font-style: italic;font-size:5px ">[切换城市]</a></li>
                </ul>
                <ul th:if="${user} == null"class="nav navbar-nav navbar-right" th:style = "'margin-right:50px'">
                    <li><a th:href="@{/loginwin}" style="font-family: '微软雅黑';color: #FFFFFF;">登录</a></li>
                    <li><a th:href="@{/loginwin}" style="font-family: '微软雅黑';color: #FFFFFF;">注册</a></li>
                </ul>
                <ul th:if="${user} != null"class="nav navbar-nav navbar-right" th:style = "'margin-right:50px'">
                    <li><a th:text = "'您好,' + ${user.username}" style="font-family: '微软雅黑';color: #FFFFFF;"></a></li>
                    <li><a th:href="@{/logout}" style="font-family: '微软雅黑';color: #FFFFFF;">退出</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!--网页标题-->

<div class="container" >
    <div class="row"style="margin:0;width:100%;text-align: center;">
        <div class=" jumbotron">
            <h2>楼盘详情</h2>
            <h5 style="color:#D8BFD8;">纵览小区恋上这座城</h5>
        </div>
    </div>
</div>

<div>
    <h2 id="buildingID"  class="hidden" th:text = "${id}"></h2>
</div>

<div  class="container">
    <div class="col-sm-2"></div>
    <div class="col-sm-8" id = "buildingName" ></div>
    <div class="col-sm-2"></div>
    <br/>
</div>

<!--楼盘信息-->
<div class="container">
    <div class="row">
        <div class="col-sm-2"></div>
        <!--小区图片-->
        <div class="col-sm-4" id="buildingImg" style="box-shadow: 0 1px 10px rgba(0,0,0,0.5);padding: 0px">
            <div class="col-sm-12" style="background: #00BB3F;height:35px;width: 100%;border-radius: 3px"> </div>
        </div>
        <div class="col-sm-1"></div>
        <!--信息面板-->
        <div class="col-sm-4">
            <div class="col-sm-12" style="background:#FF9900 ;height:35px;width: 100%;border-radius: 3px"></div>
            <div class="container" style="box-shadow: 0 1px 10px rgba(0,0,0,0.5);">
                <div class="col-sm-2"></div>
                <div class="col-sm-8">
                    <div id = "buildingPrice" class="col-sm-12"></div>
                    <div id = "buildingTags" class="col-sm-12"><img th:src="@{/img/tags.png}"></div>
                    <div id = "buildingType" class="col-sm-12"></div>
                    <div id = "buildingLocation" class="col-sm-12"><img th:src="@{/img/location_building.png}"></div>
                    <div id = "buildingRooms" class="col-sm-12"><img th:src="@{/img/star.png}"></div>
                </div>
                <div class="col-sm-2"></div>
            </div>
        </div>
        <div class="col-sm-1"></div>
    </div>
</div>






<footer class="container footer_banner">
    <div class="row">
        <br /><br /><br />
    </div>
    <!--底部导航栏-->
    <div class="row" style="border-bottom: 2px #A6E1EC;">
        <ul >
            <li><a class="footer-link" href="#"><span>关于安家</span></a></li>
            <li><a class="footer-link" href="#"><span>联系我们</span></a></li>
            <li><a class="footer-link" href="#"><span>加入我们</span></a></li>
            <li><a class="footer-link" href="#"><span>隐私申明</span></a></li>
        </ul>
    </div>
    <div class="row" style="display: inline-block;">
        <ul style="display: block;">
            <li><span class="text-muted" style="font-family: '微软雅黑'; font-size: 16px;">客服电话</span></li>
            <li><span style="font-family: '微软雅黑'; font-size: 16px;color: #FFFFFF;">741-741-74741</span></li>
        </ul>
    </div>
</footer>

</body>


<script type="text/javascript">
    $(function(){
        /*选择城市*/
        $(".cityTable tr td a").click(function () {
            var name = this.text;
            $.ajax({
                url:'/location/'+name,
                type:'get',
                success: function (data) {
                    console.log("切换成功");
                    window.location.reload();
                },
                error:function () {
                    alert("切换城市失败！");
                }
            });
        });
        /*城市切换*/
        $("#changeCity").click(function(a){
            $("#allCity").slideDown(300);
            a.stopPropagation();
            $(this).blur()
        });

        $("#allCity").click(function(a){
            a.stopPropagation()
        });

        $(document).click(function(a){
            a.button!=2&&$("#allCity").slideUp(300)
        });

        $("#foldin").click(function(){
            $("#allCity").slideUp(300)
        });

        $(document).ready(function () {
            var id = $("#buildingID").text();
            $.ajax({
               url:"/buildingInformation/"+id,
               type:'get',
                dataType:'json',
                success:function (data) {
                    var json = data;
                    console.log(json);
                    $("#buildingName").append('<h2 style="font-family: 微软雅黑;font-size: 30px;color: #000000;font-weight: 600">'+json.Name+'<span class="label label-primary" style="font-size: 15px">'+json.Status+'</span><span class="label label-success" style="font-size: 15px">'+json.Type+'</span></h2>');
                    $("#buildingImg").append('<img style="width:100%" src="'+json.ImgUrl+'"/>');
                    $("#buildingPrice").append('<span style="color:#000000;font-weight: 300;font-size:25px">'+'价格：'+json.AvgPrice+'</span><span style="color:#000000;font-weight: 300;font-size:15px">'+json.Unit+'</span>');
                    $("#buildingLocation").append('<span class="text-muted">'+json.Location+'</span>');
                    $("#buildingRooms").append('<span class="text-muted">'+json.Area+'/'+json.SubArea+'/'+json.Rooms+'</span>');
                    $("#buildingTags").append('<span class="text-muted">'+json.Tags+'</span>');
                }
            });
        })
    })
</script>
</html>